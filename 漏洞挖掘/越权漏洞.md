# 越权漏洞

越权漏洞是指攻击者能够绕过身份验证或访问控制机制，获得未经授权的权限或访问资源的能力。

也就是说，越权漏洞允许攻击者执行某些操作，而这些操作应该仅由经过授权的用户或角色执行。

越权漏洞分为水平越权和垂直越权。

## 水平越权

同级别（权限）的用户或者同一角色的不同用户之间，可以越权访问、修改或者删除的非法操作。

## 垂直越权

使用权限低的用户可以访问权限较高的用户

## 挖掘思路

看包里有没有类似id类型的参数，那就可以测试是否存在越权

对参数删除或置空，可能获取所有数据

## 场景

### 场景一

请求中没有任何参数，就连URL路径也没有包含任何用户ID信息，但是它们却有一个共同点：

    /something/something/self/something
    
通过返回信息可以得知是由于执行一些操作，然后返回了当前账户的个人信息，于是不免猜想，假如将用户ID(用户ID可以通过JWT token找到)替换掉self会发生什么事情呢？例如：

    /ngprofile/aggregate/31337/fullProfile
    
响应包中成功返回了当前账户的完整信息。将该id替换成其他用户id，获取其他用户的信息。

### 场景二

当在api/Accounts/0001176361中将用户ID替换为其他用户ID时，服务器的响应是“Invalid Account Number”

当在此用户ID后添加“/”字符时，服务器的响应将返回有关此用户的所有信息，猜测可能是“/”字符打破了服务器用来限制访问的正则表达式或模式逻辑。

当在api/Applications/18385027中将应用程序ID替换为其他应用程序ID(18385027)时，服务器的响应“ACCESS_DENIED”，并响应HTTP 401。

通过Fuzz所有字符后(%00->%ff)，可以通过利用%20、%09、%0b、%0c、%1c、%1d、%1e、%1f附加到此API中的应用程序ID来绕过授权控制，服务器将返回应用程序的完整信息。