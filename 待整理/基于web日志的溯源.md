日志基础知识

1.1 日志存放的位置

当前三个最主流的WEB服务器分别是Apache、Nginx和IIS。在Linux中，日志存放的位置在:/var/log/，其中Apache、Nginx日志默认存储在/var/log/目录下的Httpd、nginx目录中。

1.2 Web日志参数信息

Web日志中包括以下几个参数：请求访问的IP、请求的时间、请求的方法 (常见的为POST,GET) 和地址。下面给出示例和解释：
172.XX.XX.11 – – [01/Apr/2020:10:37:19 +0800] “GET / HTTP/1.1” 200 45
<请求IP><浏览者标识><浏览者名称>[请求时间] “请求方法和协议版本号 “<状态码><请求字节数>

其中，浏览者标识和浏览者名称一般为空，除了上述参数外还会有请求头中的Referer、UserAgent等信息。
常见的状态码如下：
Default
状态码 说明
200    请求成功，一般用于GET和POST请求
302    临时移动
400    客户端请求的语法错误，服务器无法理解
403    服务器收到客户端的请求，但是拒绝执行请求
404    请求的资源不存在
500    服务器内部错误，无法完成请求
503    由于超载或系统维护，服务器暂时不可用

案例分析
参考
Default
https://mp.weixin.qq.com/s?__biz=Mzg3MjE1NjQ0NA==&mid=2247491660&idx=1&sn=abe114ae2d012b570a7b7d26534de400&scene=21#wechat_redirect

分析思路

Webshell一般会存放在网站目录下。
在Web目录下筛选出可疑的文件

    最近有哪些文件被上传到服务器
    查看历史命令，最近服务器进行了哪些操作
    对Webshell的特征进行筛选
    查看文件上传的目录位置，比如Upload文件夹
    使用工具进行扫描查杀

确定受到攻击的时间范围，利用一些工具筛选时间段前后日志，根据可疑的日志、IP、攻击特征(如扫描网站大量的404，SQL注入带有select、count、from敏感字符等)来进行排查

结束语

以上是一个简单的分析，还有很多可以用来进行分析的工具如Excel、Awstats等。此外，想要高效率的进行Web日志分析，不仅要学会Web日志分析工具的使用，还要了解一些常见Web攻击的流程和手段。